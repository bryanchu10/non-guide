"use strict";(self["webpackChunknon_guide"]=self["webpackChunknon_guide"]||[]).push([[147],{1147:function(t,e,s){s.r(e),s.d(e,{default:function(){return tt}});var o=s(3396),i=s(7139),a=s(9242);const r={class:"container mt-6 mb-5 mb-md-6"},d={key:0,class:"position-absolute end-0 text-white fw-bold p-3"},c={class:"d-none d-md-block col-md-8"},n={class:"position-relative"},l=["src","alt"],u={key:0,class:"position-absolute start-0 text-white fw-bold p-4"},p={class:"col-md-5 position-absolute top-90 top-md-50 end-md-0 translate-middle-md-y"},m={ref:"infoCard",class:"p-3 py-md-4 ps-md-4 pe-md-0 bg-white rounded-1"},h={"aria-label":"breadcrumb",class:"d-flex"},g={class:"breadcrumb mb-0"},b={class:"breadcrumb-item"},f=(0,o.Uk)(" 首頁 "),v={class:"breadcrumb-item"},_=(0,o.Uk)(" 出版品 "),w={class:"breadcrumb-item","aria-current":"page"},y={key:0,class:"bi bi-heart-fill text-primary"},k={key:1,class:"bi bi-heart"},x={class:"fs-3 fs-md-4 fs-lg-2 fw-bold lh-base mb-4"},C={class:"row"},$={class:"col-7 col-lg-6 col-xl-5 order-xl-2"},I={class:"input-group input-group-lg mb-3 mb-lg-0"},A=["disabled"],P=(0,o._)("i",{class:"bi bi-dash-lg"},null,-1),D=[P],S=["disabled"],F=["disabled"],M=(0,o._)("i",{class:"bi bi-plus-lg"},null,-1),N=[M],O={class:"col-5 col-lg-6 col-xl-12 order-xl-1"},z={class:"d-flex flex-column"},H={key:0,class:"text-secondary text-decoration-line-through text-end"},q={class:"col-xl-7 order-xl-3"},U=["disabled"],W={key:0,class:"spinner-grow spinner-grow-sm align-baseline me-2",role:"status","aria-hidden":"true"},j={key:1},J={key:2},L={class:"row"},G={class:"col-md-5 mb-4 mb-md-0"},R={class:"fs-md-5 mb-0 text-prewrap"},T={class:"col-md-3"},Z={class:"fs-md-5 mb-0 text-secondary text-prewrap"},V=(0,o._)("div",{class:"container"},[(0,o._)("h3",{class:"fs-2 fw-bold mb-0"}," 您可能也會喜歡…… ")],-1);function E(t,e,s,P,M,E){const Y=(0,o.up)("VueLoading"),B=(0,o.up)("router-link"),K=(0,o.up)("ProductRecommend");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(Y,{active:M.isLoading,"is-full-page":!1},null,8,["active"]),(0,o._)("section",r,[(0,o._)("div",{class:"row position-relative mb-md-5",style:(0,i.j5)({"margin-bottom":M.infoCardHeight-12+"px"})},[(0,o._)("div",{class:"col d-md-none h-lv8 bgsz-cover bgp-center position-relative",style:(0,i.j5)({"background-image":`url(${M.product.imageUrl?M.product.imageUrl:""})`})},[M.product.price!==M.product.origin_price?((0,o.wg)(),(0,o.iD)("span",d," On Sale ")):(0,o.kq)("",!0)],4),(0,o._)("div",c,[(0,o._)("div",n,[(0,o._)("img",{class:"h-lv10 w-100 ojf-cover rounded-1",src:M.product.imageUrl,alt:M.product.title},null,8,l),M.product.price!==M.product.origin_price?((0,o.wg)(),(0,o.iD)("span",u," On Sale ")):(0,o.kq)("",!0)])]),(0,o._)("div",p,[(0,o._)("div",m,[(0,o._)("nav",h,[(0,o._)("ol",g,[(0,o._)("li",b,[(0,o.Wm)(B,{to:"/",class:"text-decoration-none link-secondary"},{default:(0,o.w5)((()=>[f])),_:1})]),(0,o._)("li",v,[(0,o.Wm)(B,{to:"/products/list",class:"text-decoration-none link-secondary"},{default:(0,o.w5)((()=>[_])),_:1})]),(0,o._)("li",w,[(0,o._)("a",{href:"#",class:"text-decoration-none link-secondary",onClick:e[0]||(e[0]=(0,a.iM)((t=>E.goProductsPage(M.product.category)),["prevent"]))},(0,i.zw)(M.product.category),1)])]),(0,o._)("a",{href:"#",class:"link-secondary ms-auto","aria-label":"加入最愛",onClick:e[1]||(e[1]=(0,a.iM)(((...t)=>E.toggleFavorites&&E.toggleFavorites(...t)),["prevent"]))},[M.isFavorite?((0,o.wg)(),(0,o.iD)("i",y)):((0,o.wg)(),(0,o.iD)("i",k))])]),(0,o._)("h2",x,(0,i.zw)(M.product.title),1),(0,o._)("div",C,[(0,o._)("div",$,[(0,o._)("div",I,[(0,o._)("button",{id:"button-addon1",class:"btn btn-tertiary",type:"button",disabled:M.status.loadingItem===M.product.id,onClick:e[2]||(e[2]=t=>E.changeProductAmount(-1))},D,8,A),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>M.productAmount=t),type:"number",class:"form-control text-center bg-tertiary border-0 input-browser-style-none","aria-label":"Example text with button addon","aria-describedby":"button-addon1",disabled:M.status.loadingItem===M.product.id,onChange:e[4]||(e[4]=t=>E.productAmountChanged(M.productAmount))},null,40,S),[[a.nr,M.productAmount]]),(0,o._)("button",{id:"button-addon2",class:"btn btn-tertiary",type:"button",disabled:M.status.loadingItem===M.product.id,onClick:e[5]||(e[5]=t=>E.changeProductAmount(1))},N,8,F)])]),(0,o._)("div",O,[(0,o._)("div",z,[M.product.origin_price!==M.product.price?((0,o.wg)(),(0,o.iD)("span",H," NT$"+(0,i.zw)(E.$filters.currency(M.product.origin_price)),1)):(0,o.kq)("",!0),(0,o._)("span",{class:(0,i.C_)(["fs-4 fw-bold text-end mb-3 mb-xl-4",{"mt-4":M.product.origin_price===M.product.price}])}," NT$"+(0,i.zw)(E.$filters.currency(M.product.price)),3)])]),(0,o._)("div",q,[(0,o._)("button",{id:"button-addon3",class:"btn btn-lg btn-primary w-100",type:"button",disabled:M.status.loadingItem===M.product.id||!M.productAmount,onClick:e[6]||(e[6]=(0,a.iM)((t=>E.addCart(M.product.id)),["prevent"]))},[M.status.loadingItem===M.product.id?((0,o.wg)(),(0,o.iD)("span",W)):(0,o.kq)("",!0),M.status.loadingItem===M.product.id?((0,o.wg)(),(0,o.iD)("span",j,"加入中…")):((0,o.wg)(),(0,o.iD)("span",J,"加入購物車"))],8,U)])])],512)])],4),(0,o._)("div",L,[(0,o._)("div",G,[(0,o._)("p",R,(0,i.zw)(M.product.content),1)]),(0,o._)("div",T,[(0,o._)("p",Z,(0,i.zw)(M.product.description),1)])])]),(0,o._)("section",null,[V,M.productsDataGotten?((0,o.wg)(),(0,o.j4)(K,{key:0,class:"pt-3 pb-5 pt-md-4 pb-md-6","parent-products-data":M.productsData},null,8,["parent-products-data"])):(0,o.kq)("",!0)])],64)}var Y=s(2213),B=s(1356),K={components:{ProductRecommend:Y.Z},mixins:[B.Z],inject:["$emitter","$filters","$pushMessageState"],props:{parentProductsData:{type:Array,default(){return[]}}},data(){return{productId:"",product:{},productAmount:1,infoCardHeight:0,productsData:[],productsDataGotten:!1,status:{loadingItem:""},browserWidth:0,isFavorite:!1,favorites:[],isLoading:!0}},watch:{browserWidth(){this.browserWidth<768&&(this.infoCardHeight=this.$refs.infoCard.offsetHeight)}},created(){this.productId=this.$route.params.productId,this.getFavorites(),this.getProduct(),this.getProducts()},updated(){this.infoCardHeight=this.$refs.infoCard.offsetHeight},methods:{getProduct(){const t=`https://vue3-course-api.hexschool.io/api/vue3-final/product/${this.productId}`;this.$http.get(t).then((t=>{t.data.success?(this.product=t.data.product,this.isLoading=!1):this.$pushMessageState(t,"取得單一商品")})).catch((t=>{this.$pushMessageState(t.response,"取得單一商品")}))},getProducts(){this.productsData=JSON.parse(JSON.stringify(this.parentProductsData)),this.productsDataGotten=!0},goProductsPage(t){this.$router.push({name:"list",params:{areaThroughRouter:t}}),this.$emitter.emit("areaFromNavbar",t)},getFavorites(){this.favorites=JSON.parse(localStorage.getItem("favoriteProducts"))||[],-1!==this.favorites.indexOf(this.productId)&&(this.isFavorite=!0)},addCart(t){const e={product_id:t,qty:this.productAmount},s="https://vue3-course-api.hexschool.io/api/vue3-final/cart";this.status.loadingItem=t,this.$http.post(s,{data:e}).then((t=>{t.data.success?this.$emitter.emit("addCart"):this.$pushMessageState(t,"加入購物車")})).catch((t=>{this.$pushMessageState(t.response,"加入購物車")})).finally((()=>{this.status.loadingItem=""}))},changeProductAmount(t){this.productAmount+=t,this.productAmountChanged(this.productAmount)},productAmountChanged(t){this.productAmount=Math.floor(t),t<0&&(this.productAmount=0),t>99&&(this.productAmount=99)},toggleFavorites(){this.favorites=JSON.parse(localStorage.getItem("favoriteProducts"))||[],!1===this.isFavorite?this.favorites.push(this.productId):this.favorites=this.favorites.filter((t=>t!==this.productId)),this.isFavorite=!this.isFavorite,localStorage.setItem("favoriteProducts",JSON.stringify(this.favorites))}}},Q=s(89);const X=(0,Q.Z)(K,[["render",E]]);var tt=X}}]);
//# sourceMappingURL=147.c36d23b8.js.map