"use strict";(self["webpackChunknon_guide"]=self["webpackChunknon_guide"]||[]).push([[531],{5531:function(t,e,i){i.r(e),i.d(e,{default:function(){return Q}});var s=i(3396),o=i(7139),r=i(9242);const a=t=>((0,s.dD)("data-v-02bf04c7"),t=t(),(0,s.Cn)(),t),n={key:0,class:"alert alert-warning",role:"alert"},l=(0,s.Uk)(" 目前您還沒有收藏任何出版品。您可以在個別出版品的資訊卡上點選 "),c=a((()=>(0,s._)("i",{class:"bi bi-heart"},null,-1))),d=(0,s.Uk)(" 符號，將該出版品加入收藏清單。 "),h=[l,c,d],u={class:"row d-md-none gx-3 gx-md-4 align-items-md-start"},f=["onClick","onKeyup"],p={class:"mb-2 position-relative"},b=["src","alt"],g={key:0,class:"text-white fw-bold position-absolute top-0 end-0 py-2 pe-2"},m={class:"btn-block-filter d-flex position-absolute bottom-0 start-0 end-0 py-2 ps-3 rounded-1"},v=["onClick"],w=a((()=>(0,s._)("i",{class:"bi bi-cart-plus fs-5"},null,-1))),y=[w],_=["onClick"],k={class:"fs-6 fs-sm-5 fw-bold text-black text-truncate"},x={class:"fw-bold text-bold text-black me-2"},C={key:0,class:"fw-bold text-bold text-secondary text-decoration-line-through"},$={ref:"masonryRow",class:"row d-none d-md-flex"},M=["onClick","onKeyup"],S={class:"mb-2 position-relative"},O=["src","alt"],P={key:0,class:"text-block-filter text-white fw-bold text-end position-absolute top-0 start-0 end-0 py-2 pe-3"},R={class:"btn-block-filter d-flex position-absolute bottom-0 start-0 end-0 py-2 ps-3 rounded-1"},D=["onClick"],H=a((()=>(0,s._)("i",{class:"bi bi-cart-plus fs-5"},null,-1))),W=[H],I=["onClick"],L={class:"fs-5 fs-lg-4 fw-bold text-black"},F={class:"fw-bold text-bold text-black me-2"},U={key:0,class:"fw-bold text-bold text-secondary text-decoration-line-through"};function N(t,e,i,a,l,c){const d=(0,s.up)("UserNavbar"),w=(0,s.up)("VueLoading"),H=(0,s.up)("SubscribeMe"),N=(0,s.up)("UserFooter"),Z=(0,s.up)("CartOffcanvas"),q=(0,s.up)("LoginModal");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(d,{onShowOffcanvas:c.showCartCanvas},null,8,["onShowOffcanvas"]),(0,s._)("section",{class:(0,o.C_)(["container mt-6 mb-4 position-relative",[l.isLoading?"py-7":"pt-4"]]),style:(0,o.j5)({minHeight:`${l.sectionHeight}px`})},[(0,s.Wm)(w,{active:l.isLoading,"is-full-page":!1},null,8,["active"]),l.filterProducts.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",n,h)),(0,s._)("div",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.filterProducts,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:t.id,class:"col-6"},[(0,s._)("div",{class:"text-decoration-none position-relative mb-4 hover-scale hover-pointer",tabindex:"0",onClick:e=>c.goProduct(t.id),onKeyup:(0,r.D2)((e=>c.goProduct(t.id)),["enter"])},[(0,s._)("div",p,[(0,s._)("img",{class:"w-100 ojf-cover rounded-1 mb-2",src:t.imageUrl,alt:t.title,style:(0,o.j5)({height:`${l.mobileImgHeight}px`})},null,12,b),t.price!==t.origin_price?((0,s.wg)(),(0,s.iD)("small",g," Sale ")):(0,s.kq)("",!0),(0,s._)("div",m,[(0,s._)("button",{ref_for:!0,ref:c.setItemRef,type:"button",class:"btn btn-outline-light btn--cart-plus rounded-circle border border-2 me-2",onClick:(0,r.iM)((i=>c.addOne(t.id,e)),["stop"])},y,8,v),(0,s._)("button",{type:"button",class:"btn btn-outline-light btn--heart rounded-circle border border-2 pb-1",onClick:(0,r.iM)((e=>c.toggleFavorites(t.id)),["stop"])},[(0,s._)("i",{class:(0,o.C_)(["bi fs-5",[c.isFavorite(t.id)?"bi-heart-fill":"bi-heart"]])},null,2)],8,_)])]),(0,s._)("h3",k,(0,o.zw)(t.title),1),(0,s._)("small",x," $NT"+(0,o.zw)(c.$filters.currency(t.price)),1),t.price!==t.origin_price?((0,s.wg)(),(0,s.iD)("small",C," $NT"+(0,o.zw)(c.$filters.currency(t.origin_price)),1)):(0,s.kq)("",!0)],40,f)])))),128))]),(0,s._)("div",$,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.filterProducts,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:t.id,class:"col-4 col-xl-3"},[(0,s._)("div",{class:"text-decoration-none mb-5 hover-scale hover-pointer",tabindex:"0",onClick:e=>c.goProduct(t.id),onKeyup:(0,r.D2)((e=>c.goProduct(t.id)),["enter"])},[(0,s._)("div",S,[(0,s._)("img",{class:"w-100 rounded-1",src:t.imageUrl,alt:t.title},null,8,O),t.price!==t.origin_price?((0,s.wg)(),(0,s.iD)("span",P," On Sale ")):(0,s.kq)("",!0),(0,s._)("div",R,[(0,s._)("button",{ref_for:!0,ref:c.setMasonryItemRef,type:"button",class:"btn btn-outline-light btn--cart-plus rounded-circle border border-2 me-2",onClick:(0,r.iM)((i=>c.addOne(t.id,e)),["stop"])},W,8,D),(0,s._)("button",{type:"button",class:"btn btn-outline-light btn--heart rounded-circle border border-2 pb-1",onClick:(0,r.iM)((e=>c.toggleFavorites(t.id)),["stop"])},[(0,s._)("i",{class:(0,o.C_)(["bi fs-5",[c.isFavorite(t.id)?"bi-heart-fill":"bi-heart"]])},null,2)],8,I)])]),(0,s._)("h3",L,(0,o.zw)(t.title),1),(0,s._)("span",F," $NT"+(0,o.zw)(c.$filters.currency(t.price)),1),t.price!==t.origin_price?((0,s.wg)(),(0,s.iD)("span",U," $NT"+(0,o.zw)(c.$filters.currency(t.origin_price)),1)):(0,s.kq)("",!0)],40,M)])))),128))],512)],6),(0,s.Wm)(H,{ref:"subscribeSection"},null,512),(0,s.Wm)(N,{ref:"footerSection",onShowLoginModal:c.showLoginModal},null,8,["onShowLoginModal"]),(0,s.Wm)(Z,{ref:"cartOffcanvas"},null,512),(0,s.Wm)(q,{ref:"loginModal"},null,512)],64)}var Z=i(1356),q=i(2859),z=i.n(q),K=i(9092),T=i.n(K),j=i(9147),J=i(5135),Y=i(9862),E=i(7449),A=i(9017),V={components:{UserNavbar:j.Z,SubscribeMe:J.Z,UserFooter:Y.Z,CartOffcanvas:E.Z,LoginModal:A.Z},mixins:[Z.Z],inject:["$emitter","$filters","$pushMessageState"],data(){return{productsData:[],isLoading:!0,favorites:[],filterProducts:[],browserWidth:0,mobileImgHeight:0,masonry:{},imagesLoaded:{},itemRefs:[],itemMasonryRefs:[],browserHeight:0,sectionHeight:0}},watch:{browserWidth(){this.browserWidth<576&&(this.mobileImgHeight=.5*(this.browserWidth-16-24)),this.browserWidth>=576&&this.browserWidth<768&&(this.mobileImgHeight=250);const t=this.$refs.subscribeSection.sectionHeight,e=this.$refs.footerSection.sectionHeight;this.sectionHeight=this.browserHeight-t-e-96}},created(){this.getProducts()},beforeUpdate(){this.itemRefs=[],this.itemMasonryRefs=[]},updated(){this.masonry=new(z())(this.$refs.masonryRow,{percentPosition:!0}),T()(this.$refs.masonryRow,(()=>{this.masonry.layout()}))},methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/vue3-final/products/all";this.$http.get(t).then((t=>{this.productsData=t.data.products,this.getFavorites()})).catch((t=>{this.$pushMessageState(t.response,"取得商品列表")})).finally((()=>{this.isLoading=!1}))},getFavorites(){this.favorites=JSON.parse(localStorage.getItem("favoriteProducts"))||[],this.filterProducts=[],this.favorites.forEach((t=>{this.filterProducts.push(this.productsData.find((e=>e.id===t)))}))},toggleFavorites(t){this.favorites=JSON.parse(localStorage.getItem("favoriteProducts"))||[],-1===this.favorites.indexOf(t)?this.favorites.push(t):this.favorites=this.favorites.filter((e=>e!==t)),localStorage.setItem("favoriteProducts",JSON.stringify(this.favorites)),this.getFavorites()},goProduct(t){this.$router.push(`/products/${t}`)},isFavorite(t){return-1!==this.favorites.indexOf(t)},addOne(t,e){const i={product_id:t,qty:1},s="https://vue3-course-api.hexschool.io/api/vue3-final/cart";this.$http.post(s,{data:i}).then((t=>{t.data.success?this.$emitter.emit("addCart"):this.$pushMessageState(t,"加入購物車")})).catch((t=>{this.$pushMessageState(t.response,"加入購物車")}));const o=document.createElement("div");o.textContent="+1",o.setAttribute("class","plus-one animate__animated animate__fadeOutUp"),this.browserWidth<768?(this.itemRefs[e].appendChild(o),setTimeout((()=>{this.itemRefs[e].removeChild(o)}),1e3)):(this.itemMasonryRefs[e].appendChild(o),setTimeout((()=>{this.itemMasonryRefs[e].removeChild(o)}),1e3))},setItemRef(t){this.itemRefs.push(t)},setMasonryItemRef(t){this.itemMasonryRefs.push(t)},showCartCanvas(){this.$refs.cartOffcanvas.showOffcanvas()},showLoginModal(){this.$refs.loginModal.showModal()}}},B=i(89);const G=(0,B.Z)(V,[["render",N],["__scopeId","data-v-02bf04c7"]]);var Q=G}}]);
//# sourceMappingURL=531.fe4e5333.js.map