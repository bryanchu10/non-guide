"use strict";(self["webpackChunknon_guide"]=self["webpackChunknon_guide"]||[]).push([[102],{709:function(e,t,a){a.d(t,{Z:function(){return w}});var s=a(3396),o=a(7139),i=a(9242);const n={"aria-label":"Page navigation",class:"mb-4"},l={class:"pagination justify-content-center"},d=["tabindex"],p=(0,s._)("span",{"aria-hidden":"true"},"«",-1),u=[p],c=["onClick"],r=["tabindex"],m=(0,s._)("span",{"aria-hidden":"true"},"»",-1),h=[m];function _(e,t,a,p,m,_){return(0,s.wg)(),(0,s.iD)("nav",n,[(0,s._)("ul",l,[(0,s._)("li",{class:(0,o.C_)(["page-item",{disabled:!a.pages.has_pre}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Previous",tabindex:a.pages.has_pre?0:-1,onClick:t[0]||(t[0]=(0,i.iM)((e=>_.updatePage(a.pages.current_page-1)),["prevent"]))},u,8,d)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.pages.total_pages,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e,class:(0,o.C_)(["page-item",{active:e===a.pages.current_page}])},[(0,s._)("a",{class:"page-link",href:"#",onClick:(0,i.iM)((t=>_.updatePage(e)),["prevent"])},(0,o.zw)(e),9,c)],2)))),128)),(0,s._)("li",{class:(0,o.C_)(["page-item",{disabled:!a.pages.has_next}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Next",tabindex:a.pages.has_next?0:-1,onClick:t[1]||(t[1]=(0,i.iM)((e=>_.updatePage(a.pages.current_page+1)),["prevent"]))},h,8,r)],2)])])}var b={props:{pages:{type:Object,default(){return{}}},tabindex:{type:Number,default:1}},emits:["emit-pages"],methods:{updatePage(e){this.$emit("emit-pages",e)}}},g=a(89);const f=(0,g.Z)(b,[["render",_]]);var w=f},2218:function(e,t,a){a.d(t,{Z:function(){return C}});var s=a(3396),o=a(7139);const i={ref:"modal",class:"modal",tabindex:"-1"},n={class:"modal-dialog"},l={class:"modal-content"},d=(0,s._)("div",{class:"modal-header bg-danger text-white"},[(0,s._)("h5",{class:"modal-title"}," 刪除項目 "),(0,s._)("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),p={class:"modal-body"},u=(0,s.Uk)("是否刪除"),c={class:"text-danger"},r=(0,s.Uk)("？（刪除後將無法恢復）"),m={class:"modal-footer"},h=(0,s._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function _(e,t,a,_,b,g){return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",n,[(0,s._)("div",l,[d,(0,s._)("div",p,[(0,s._)("p",null,[u,(0,s._)("strong",c,(0,o.zw)(b.titleStr),1),r])]),(0,s._)("div",m,[h,(0,s._)("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=t=>e.$emit("del-item",b.tempItem))}," 確認刪除 ")])])])],512)}var b=a(1339),g={mixins:[b.Z],props:{item:{type:Object,default(){return{}}}},emits:["del-item"],data(){return{tempItem:{},titleStr:"",modal:{}}},watch:{item(){this.tempItem=JSON.parse(JSON.stringify(this.item)),"ordersManage"===this.$route.name?this.titleStr=this.item.id:this.titleStr=this.item.title}}},f=a(89);const w=(0,f.Z)(g,[["render",_]]);var C=w},4102:function(e,t,a){a.r(t),a.d(t,{default:function(){return pe}});var s=a(3396),o=a(7139);const i={class:"container mt-6"},n={class:"text-end"},l={class:"table-responsive"},d={class:"table mt-4"},p=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{width:"30",class:"text-nowrap"}," # "),(0,s._)("th",{width:"",class:"text-nowrap"}," 名稱 "),(0,s._)("th",{width:"",class:"text-nowrap"}," 優惠代碼 "),(0,s._)("th",{width:"",class:"text-nowrap"}," 折扣 "),(0,s._)("th",{width:"",class:"text-nowrap"}," 到期時間 "),(0,s._)("th",{width:"80",class:"text-nowrap"}," 狀態 "),(0,s._)("th",{width:"120",class:"text-nowrap"}," 編輯 ")])],-1),u={class:"text-nowrap"},c={class:"text-nowrap"},r={class:"text-right"},m={class:"text-right text-nowrap"},h={class:"list-unstyled mb-0"},_={class:"text-nowrap"},b={key:0,class:"text-success"},g={key:1,class:"text-muted"},f={class:"text-nowrap"},w={class:"btn-group"},C=["onClick"],v=["onClick"];function y(e,t,a,y,x,M){const k=(0,s.up)("VueLoading"),D=(0,s.up)("CouponUpdateModal"),$=(0,s.up)("DelModal"),S=(0,s.up)("PaginationComponent");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(k,{active:x.isLoading},null,8,["active"]),(0,s._)("div",i,[(0,s._)("div",n,[(0,s._)("button",{class:"btn btn-primary",type:"button",onClick:t[0]||(t[0]=e=>M.openModal(!0))}," 增加一組優惠代碼 ")]),(0,s._)("div",l,[(0,s._)("table",d,[p,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(x.coupons,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id,class:"align-middle"},[(0,s._)("td",null,(0,o.zw)(e.num),1),(0,s._)("td",u,(0,o.zw)(e.title),1),(0,s._)("td",c,(0,o.zw)(e.code),1),(0,s._)("td",r,(0,o.zw)(e.percent)+"% ",1),(0,s._)("td",m,[(0,s._)("ul",h,[(0,s._)("li",null,(0,o.zw)(M.$dayjs.unix(e.due_date).tz("Asia/Taipei").format("YYYY-MM-DD")),1),(0,s._)("li",null,(0,o.zw)(M.$dayjs.unix(e.due_date).tz("Asia/Taipei").format("HH:mm:ss")),1)])]),(0,s._)("td",_,[e.is_enabled?((0,s.wg)(),(0,s.iD)("span",b,"啟用")):((0,s.wg)(),(0,s.iD)("span",g,"未啟用"))]),(0,s._)("td",f,[(0,s._)("div",w,[(0,s._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:t=>M.openModal(!1,e)}," 編輯 ",8,C),(0,s._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:t=>M.openDelModal(e)}," 刪除 ",8,v)])])])))),128))])]),(0,s.Wm)(D,{ref:"couponUpdateModal",coupon:x.tempCoupon,"is-new":x.isNew,onUpdateCoupon:M.updateCoupon},null,8,["coupon","is-new","onUpdateCoupon"]),(0,s.Wm)($,{ref:"delModal",item:x.tempCoupon,onDelItem:M.delCoupon},null,8,["item","onDelItem"])])]),(0,s.Wm)(S,{pages:x.pagination,onEmitPages:M.getCoupons},null,8,["pages","onEmitPages"])],64)}var x=a(9242);const M={id:"exampleModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},k={class:"modal-dialog",role:"document"},D={class:"modal-content border-0"},$={class:"modal-header bg-dark text-white fw-bold"},S={id:"exampleModalLabel",class:"modal-title"},N={class:"fw-bold"},U=(0,s._)("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),j={class:"modal-body"},z={class:"row gx-2"},O={class:"col-12"},T={class:"mb-3"},Y=(0,s._)("label",{for:"title",class:"form-label"},"標題",-1),P={class:"col-md-6"},Z={class:"mb-3"},J=(0,s._)("label",{for:"code",class:"form-label"},"代碼",-1),L={class:"col-md-6"},H={class:"mb-3"},V=(0,s._)("label",{for:"price",class:"form-label"},"折扣",-1),I={class:"input-group mb-3"},A=(0,s._)("span",{id:"basic-addon2",class:"input-group-text"},"%",-1),B={class:"col-md-6 mb-3"},W=(0,s._)("label",{for:"due_date_date",class:"form-label"},"到期日",-1),E={class:"col-6 mb-3"},K=(0,s._)("label",{for:"due_date_time",class:"form-label"},"到期時間",-1),q={class:"mb-3"},F={class:"form-check"},G=(0,s._)("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),Q={class:"modal-footer"},R=(0,s._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function X(e,t,a,i,n,l){return(0,s.wg)(),(0,s.iD)("div",M,[(0,s._)("div",k,[(0,s._)("div",D,[(0,s._)("div",$,[(0,s._)("h5",S,[(0,s._)("span",N,(0,o.zw)(a.isNew?"新增":"編輯")+"優惠代碼",1)]),U]),(0,s._)("div",j,[(0,s._)("div",z,[(0,s._)("div",O,[(0,s._)("div",T,[Y,(0,s.wy)((0,s._)("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=e=>n.tempCoupon.title=e),type:"text",class:"form-control",placeholder:"請輸入標題"},null,512),[[x.nr,n.tempCoupon.title]])])]),(0,s._)("div",P,[(0,s._)("div",Z,[J,(0,s.wy)((0,s._)("input",{id:"code","onUpdate:modelValue":t[1]||(t[1]=e=>n.tempCoupon.code=e),type:"text",class:"form-control",placeholder:"請設定代碼"},null,512),[[x.nr,n.tempCoupon.code]])])]),(0,s._)("div",L,[(0,s._)("div",H,[V,(0,s._)("div",I,[(0,s.wy)((0,s._)("input",{id:"price","onUpdate:modelValue":t[2]||(t[2]=e=>n.tempCoupon.percent=e),type:"number",class:"form-control",placeholder:"請輸入單位"},null,512),[[x.nr,n.tempCoupon.percent]]),A])])]),(0,s._)("div",B,[W,(0,s.wy)((0,s._)("input",{id:"due_date_date","onUpdate:modelValue":t[3]||(t[3]=e=>n.isoDue_date_date=e),type:"date",class:"form-control",placeholder:""},null,512),[[x.nr,n.isoDue_date_date]])]),(0,s._)("div",E,[K,(0,s.wy)((0,s._)("input",{id:"due_date_time","onUpdate:modelValue":t[4]||(t[4]=e=>n.isoDue_date_time=e),type:"time",class:"form-control",placeholder:""},null,512),[[x.nr,n.isoDue_date_time]])]),(0,s._)("div",q,[(0,s._)("div",F,[(0,s.wy)((0,s._)("input",{id:"is_enabled","onUpdate:modelValue":t[5]||(t[5]=e=>n.tempCoupon.is_enabled=e),class:"form-check-input",type:"checkbox","true-value":1,"false-value":0},null,512),[[x.e8,n.tempCoupon.is_enabled]]),G])])])]),(0,s._)("div",Q,[R,(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:t[6]||(t[6]=t=>e.$emit("update-coupon",n.tempCoupon))}," 確認 ")])])])],512)}var ee=a(1339),te={mixins:[ee.Z],inject:["$dayjs"],props:{coupon:{type:Object,default(){return{}}},isNew:{type:Boolean,default:!1}},emits:["update-coupon"],data(){return{tempCoupon:{},isLoading:!1,isoDue_date_date:"",isoDue_date_time:"",modal:{}}},computed:{timeToBackend(){const e=`${this.isoDue_date_date}T${this.isoDue_date_time}+08:00`,t=this.$dayjs(e).unix();return t}},watch:{coupon(){this.tempCoupon=JSON.parse(JSON.stringify(this.coupon)),(this.tempCoupon.due_date||this.isoDue_date_date)&&(this.isoDue_date_date=this.$dayjs.unix(this.tempCoupon.due_date).tz("Asia/Taipei").format("YYYY-MM-DD")),(this.tempCoupon.due_date||this.isoDue_date_time)&&(this.isoDue_date_time=this.$dayjs.unix(this.tempCoupon.due_date).tz("Asia/Taipei").format("HH:mm:ss"))},timeToBackend(){this.tempCoupon.due_date=this.timeToBackend}}},ae=a(89);const se=(0,ae.Z)(te,[["render",X]]);var oe=se,ie=a(2218),ne=a(709),le={components:{CouponUpdateModal:oe,DelModal:ie.Z,PaginationComponent:ne.Z},inject:["$emitter","$dayjs","$pushMessageState"],data(){return{coupons:[],pagination:{},tempCoupon:{},isNew:!1,isLoading:!1,pageTheme:"優惠券"}},created(){this.getCoupons()},methods:{getCoupons(e=1){const t=`https://vue3-course-api.hexschool.io/api/vue3-final/admin/coupons?page=${e}`;this.isLoading=!0,this.$http.get(t).then((e=>{this.coupons=e.data.coupons,this.pagination=e.data.pagination,this.isLoading=!1})).catch((e=>{this.$pushMessageState(e.response,"取得優惠券列表")}))},openModal(e,t){e?(this.tempCoupon={},this.tempCoupon.is_enabled=0):this.tempCoupon=JSON.parse(JSON.stringify(t)),this.isNew=e,this.$refs.couponUpdateModal.showModal()},updateCoupon(e){this.tempCoupon=e;let t="https://vue3-course-api.hexschool.io/api/vue3-final/admin/coupon",a="post";this.isNew||(t=`https://vue3-course-api.hexschool.io/api/vue3-final/admin/coupon/${e.id}`,a="put"),this.$http[a](t,{data:this.tempCoupon}).then((e=>{this.$refs.couponUpdateModal.hideModal(),this.getCoupons();const t=this.isNew?`${this.pageTheme}新增`:`${this.pageTheme}更新`;this.$pushMessageState(e,t)})).catch((e=>{this.$pushMessageState(e.response,"更新單一優惠券")}))},openDelModal(e){this.tempCoupon=JSON.parse(JSON.stringify(e)),this.$refs.delModal.showModal()},delCoupon(e){this.tempCoupon=e;const t=`https://vue3-course-api.hexschool.io/api/vue3-final/admin/coupon/${e.id}`;this.$http.delete(t,{data:this.tempCoupon}).then((e=>{this.$refs.delModal.hideModal(),this.getCoupons(),this.$pushMessageState(e,"刪除")})).catch((e=>{this.$pushMessageState(e.response,"刪除單一商品")}))}}};const de=(0,ae.Z)(le,[["render",y]]);var pe=de}}]);
//# sourceMappingURL=102.677b877a.js.map