"use strict";(self["webpackChunknon_guide"]=self["webpackChunknon_guide"]||[]).push([[818],{2818:function(t,e,i){i.r(e),i.d(e,{default:function(){return V}});var s=i(3396),a=i(7139),r=i(9242);const o=t=>((0,s.dD)("data-v-54c8ae82"),t=t(),(0,s.Cn)(),t),n={class:"navbar bg-light mt-6"},l={class:"container"},c={class:"navbar-nav flex-row justify-content-between justify-content-md-start w-100"},d=["onClick"],u={class:"fs-md-4"},h={class:"fs-8 fs-md-7 align-top ms-1"},m={class:"container pt-4 pt-md-5 mb-4 position-relative"},p={class:"row d-md-none gx-3 gx-md-4 align-items-md-start"},b=["onClick","onKeyup"],f={class:"mb-2 position-relative"},g=["src","alt"],v={key:0,class:"text-white fw-bold position-absolute top-0 end-0 py-2 pe-2"},w={class:"btn-block-filter d-flex position-absolute bottom-0 start-0 end-0 py-2 ps-3 rounded-1"},y=["onClick"],_=o((()=>(0,s._)("i",{class:"bi bi-cart-plus fs-5"},null,-1))),k=[_],x=["onClick"],$={class:"fs-6 fs-sm-5 fw-bold text-black text-truncate"},C={class:"fw-bold text-bold text-black me-2"},S={key:0,class:"fw-bold text-bold text-secondary text-decoration-line-through"},R={ref:"masonryRow",class:"row d-none d-md-flex"},P=["onClick","onKeyup"],D={class:"mb-2 position-relative"},M=["src","alt"],F={key:0,class:"text-block-filter text-white fw-bold text-end position-absolute top-0 start-0 end-0 py-2 pe-3"},N={class:"btn-block-filter d-flex position-absolute bottom-0 start-0 end-0 py-2 ps-3 rounded-1"},I=["onClick"],O=o((()=>(0,s._)("i",{class:"bi bi-cart-plus fs-5"},null,-1))),H=[O],T=["onClick"],W={class:"fs-5 fs-lg-4 fw-bold text-black"},z={class:"fw-bold text-bold text-black me-2"},K={key:0,class:"fw-bold text-bold text-secondary text-decoration-line-through"};function L(t,e,i,o,_,O){const L=(0,s.up)("VueLoading");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("nav",n,[(0,s._)("div",l,[(0,s._)("ul",c,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(_.areas,((t,e)=>((0,s.wg)(),(0,s.iD)("li",{key:e,class:"nav-item me-md-5"},[(0,s._)("a",{href:"#",class:(0,a.C_)(["nav-link",[_.areaSelected===t.name?"active fw-bold":"link-secondary"]]),onClick:(0,r.iM)((e=>_.areaSelected=t.name),["prevent"])},[(0,s._)("span",u,(0,a.zw)(t.name),1),(0,s._)("small",h,(0,a.zw)(t.amount),1)],10,d)])))),128))])])]),(0,s._)("section",m,[(0,s.Wm)(L,{active:_.isLoading,"is-full-page":!1},null,8,["active"]),(0,s._)("div",p,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(O.filterProducts,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:t.id,class:"col-6"},[(0,s._)("div",{class:"text-decoration-none position-relative mb-4 hover-scale hover-pointer",tabindex:"0",onClick:e=>O.goProduct(t.id),onKeyup:(0,r.D2)((e=>O.goProduct(t.id)),["enter"])},[(0,s._)("div",f,[(0,s._)("img",{class:"w-100 ojf-cover rounded-1 mb-2",src:t.imageUrl,alt:t.title,style:(0,a.j5)({height:`${_.mobileImgHeight}px`})},null,12,g),t.price!==t.origin_price?((0,s.wg)(),(0,s.iD)("small",v," Sale ")):(0,s.kq)("",!0),(0,s._)("div",w,[(0,s._)("button",{ref_for:!0,ref:O.setItemRef,type:"button",class:"btn btn-outline-light btn--cart-plus rounded-circle border border-2 me-2",onClick:(0,r.iM)((i=>O.addOne(t.id,e)),["stop"])},k,8,y),(0,s._)("button",{type:"button",class:"btn btn-outline-light btn--heart rounded-circle border border-2 pb-1",onClick:(0,r.iM)((e=>O.toggleFavorites(t.id)),["stop"])},[(0,s._)("i",{class:(0,a.C_)(["bi fs-5",[O.isFavorite(t.id)?"bi-heart-fill":"bi-heart"]])},null,2)],8,x)])]),(0,s._)("h3",$,(0,a.zw)(t.title),1),(0,s._)("small",C," $NT"+(0,a.zw)(O.$filters.currency(t.price)),1),t.price!==t.origin_price?((0,s.wg)(),(0,s.iD)("small",S," $NT"+(0,a.zw)(O.$filters.currency(t.origin_price)),1)):(0,s.kq)("",!0)],40,b)])))),128))]),(0,s._)("div",R,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(O.filterProducts,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:t.id,class:"col-4 col-xl-3"},[(0,s._)("div",{class:"text-decoration-none mb-5 hover-scale hover-pointer",tabindex:"0",onClick:e=>O.goProduct(t.id),onKeyup:(0,r.D2)((e=>O.goProduct(t.id)),["enter"])},[(0,s._)("div",D,[(0,s._)("img",{class:"w-100 rounded-1",src:t.imageUrl,alt:t.title},null,8,M),t.price!==t.origin_price?((0,s.wg)(),(0,s.iD)("span",F," On Sale ")):(0,s.kq)("",!0),(0,s._)("div",N,[(0,s._)("button",{ref_for:!0,ref:O.setMasonryItemRef,type:"button",class:"btn btn-outline-light btn--cart-plus rounded-circle border border-2 me-2",onClick:(0,r.iM)((i=>O.addOne(t.id,e)),["stop"])},H,8,I),(0,s._)("button",{type:"button",class:"btn btn-outline-light btn--heart rounded-circle border border-2 pb-1",onClick:(0,r.iM)((e=>O.toggleFavorites(t.id)),["stop"])},[(0,s._)("i",{class:(0,a.C_)(["bi fs-5",[O.isFavorite(t.id)?"bi-heart-fill":"bi-heart"]])},null,2)],8,T)])]),(0,s._)("h3",W,(0,a.zw)(t.title),1),(0,s._)("span",z," $NT"+(0,a.zw)(O.$filters.currency(t.price)),1),t.price!==t.origin_price?((0,s.wg)(),(0,s.iD)("span",K," $NT"+(0,a.zw)(O.$filters.currency(t.origin_price)),1)):(0,s.kq)("",!0)],40,P)])))),128))],512)])],64)}var A=i(1356),j=i(2859),q=i.n(j),J=i(9092),U=i.n(J),Y={mixins:[A.Z],inject:["$emitter","$filters","$pushMessageState"],props:{parentProductsData:{type:Array,default(){return[]}}},data(){return{products:[],device:"",mobileImgHeight:0,areaSelected:"全部",areas:[{name:"全部",amount:0},{name:"北部",amount:0},{name:"中部",amount:0},{name:"南部",amount:0},{name:"東部",amount:0},{name:"離島",amount:0}],masonry:{},imagesLoaded:{},browserWidth:0,isLoading:!0,favorites:[],itemRefs:[],itemMasonryRefs:[]}},computed:{filterProducts(){return"全部"!==this.areaSelected?this.products.filter((t=>t.category.match(this.areaSelected))):this.products}},watch:{browserWidth(){this.browserWidth<576&&(this.device="mobile",this.mobileImgHeight=.5*(this.browserWidth-16-24)),this.browserWidth>=576&&this.browserWidth<768&&(this.device="mobile",this.mobileImgHeight=250),this.browserWidth>=768&&(this.device="PC")},areaSelected(t){this.$emitter.emit("areaFromList",t),this.$nextTick((()=>{this.masonry=new(q())(this.$refs.masonryRow,{percentPosition:!0}),U()(this.$refs.masonryRow,(()=>{this.masonry.layout(),this.isLoading=!1}))}))}},created(){this.$route.params.areaThroughRouter?this.areaSelected=this.$route.params.areaThroughRouter:this.areaSelected="全部",this.getProducts(),this.getFavorites(),this.countAreaAmount()},mounted(){this.$emitter.on("areaFromNavbar",this.areaFromNavbarHandler),this.masonry=new(q())(this.$refs.masonryRow,{percentPosition:!0}),U()(this.$refs.masonryRow,(()=>{this.masonry.layout(),this.$nextTick((()=>{this.isLoading=!1}))}))},beforeUpdate(){this.itemRefs=[],this.itemMasonryRefs=[]},beforeUnmount(){this.$emitter.off("areaFromNavbar",this.areaFromNavbarHandler)},methods:{getProducts(){const t=JSON.parse(JSON.stringify(this.parentProductsData)),e=t.filter((t=>t.price!==t.origin_price));e.push(...t.filter((t=>t.price===t.origin_price))),this.products=e},countAreaAmount(){this.areas[0].amount=this.products.length,this.products.forEach((t=>{switch(t.category){case"北部":this.areas[1].amount+=1;break;case"中部":this.areas[2].amount+=1;break;case"南部":this.areas[3].amount+=1;break;case"東部":this.areas[4].amount+=1;break;case"離島":this.areas[5].amount+=1;break;default:break}}))},goProduct(t){this.$router.push(`/products/${t}`)},areaFromNavbarHandler(t){this.areaSelected=t},getFavorites(){this.favorites=JSON.parse(localStorage.getItem("favoriteProducts"))||[]},toggleFavorites(t){this.favorites=JSON.parse(localStorage.getItem("favoriteProducts"))||[],-1===this.favorites.indexOf(t)?this.favorites.push(t):this.favorites=this.favorites.filter((e=>e!==t)),localStorage.setItem("favoriteProducts",JSON.stringify(this.favorites))},isFavorite(t){return-1!==this.favorites.indexOf(t)},addOne(t,e){const i={product_id:t,qty:1},s="https://vue3-course-api.hexschool.io/api/vue3-final/cart";this.$http.post(s,{data:i}).then((t=>{t.data.success?this.$emitter.emit("addCart"):this.$pushMessageState(t,"加入購物車")})).catch((t=>{this.$pushMessageState(t.response,"加入購物車")}));const a=document.createElement("div");a.textContent="+1",a.setAttribute("class","plus-one animate__animated animate__fadeOutUp"),this.browserWidth<768?(this.itemRefs[e].appendChild(a),setTimeout((()=>{this.itemRefs[e].removeChild(a)}),1e3)):(this.itemMasonryRefs[e].appendChild(a),setTimeout((()=>{this.itemMasonryRefs[e].removeChild(a)}),1e3))},setItemRef(t){this.itemRefs.push(t)},setMasonryItemRef(t){this.itemMasonryRefs.push(t)}}},E=i(89);const Z=(0,E.Z)(Y,[["render",L],["__scopeId","data-v-54c8ae82"]]);var V=Z}}]);
//# sourceMappingURL=818.9c2a64ed.js.map