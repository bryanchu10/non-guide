"use strict";(self["webpackChunknon_guide"]=self["webpackChunknon_guide"]||[]).push([[151],{9151:function(e,t,a){a.r(t),a.d(t,{default:function(){return de}});var r=a(3396),o=a(7139),s=a(2835);const d={ref:"nav",class:"navbar py-3"},l={class:"container"},n=(0,r._)("img",{class:"me-2",src:s,alt:"logo",width:"24",height:"24"},null,-1),i=(0,r._)("h1",{class:"fs-4 fw-bold lh-base mb-0"}," 烏有指南 ",-1),c={class:"row justify-content-center"},m={class:"col-lg-4 order-lg-3 mb-4"},u={class:"col-lg-12 order-lg-1 mb-4",style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb"},p={class:"breadcrumb mb-0"},b=(0,r._)("li",{class:"breadcrumb-item text-primary"}," 購物車 ",-1),h={class:"col-lg-6 order-lg-2 position-relative"},g=(0,r.Uk)(" 目前購物車是空的 "),f=(0,r.Uk)(" 關閉此彈出視窗後，將自動跳轉到出版品頁面。 ");function y(e,t,a,s,y,_){const v=(0,r.up)("VueLoading"),w=(0,r.up)("router-link"),$=(0,r.up)("OrderSummary"),x=(0,r.up)("RouterView"),S=(0,r.up)("UserFooter"),M=(0,r.up)("LoginModal"),O=(0,r.up)("HintModal");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(v,{active:y.isLoading},null,8,["active"]),(0,r._)("nav",d,[(0,r._)("div",l,[(0,r.Wm)(w,{class:"navbar-brand d-flex align-items-center pe-2 py-0",to:"/"},{default:(0,r.w5)((()=>[n,i])),_:1})])],512),(0,r._)("div",{class:"container",style:(0,o.j5)({minHeight:`${y.sectionHeight}px`})},[(0,r._)("div",c,[(0,r._)("div",m,[(0,r.Wm)($,{"parent-order-summary-data":y.orderSummaryData,"parent-order-summary-total":y.orderSummaryTotal},null,8,["parent-order-summary-data","parent-order-summary-total"])]),(0,r._)("nav",u,[(0,r._)("ol",p,[b,(0,r._)("li",{class:(0,o.C_)(["breadcrumb-item",["info"===e.$route.name?"fw-bold text-dark":"text-secondary"]])}," 建立訂單 ",2),(0,r._)("li",{class:(0,o.C_)(["breadcrumb-item text-secondary",["payment"===e.$route.name?"fw-bold text-dark":"text-secondary"]])}," 付款 ",2)])]),(0,r._)("div",h,["payment"===e.$route.name?((0,r.wg)(),(0,r.j4)(x,{key:0,"parent-receiver-info":y.receiverInfo,"parent-receiver-message":y.receiverMessage},null,8,["parent-receiver-info","parent-receiver-message"])):((0,r.wg)(),(0,r.j4)(x,{key:1}))])])],4),(0,r.Wm)(S,{ref:"footerSection",onShowLoginModal:_.showLoginModal},null,8,["onShowLoginModal"]),(0,r.Wm)(M,{ref:"loginModal"},null,512),(0,r.Wm)(O,{ref:"hintModal"},{title:(0,r.w5)((()=>[g])),body:(0,r.w5)((()=>[f])),_:1},512)],64)}var _=a(1356);const v=e=>((0,r.dD)("data-v-841fb0ae"),e=e(),(0,r.Cn)(),e),w={id:"accordionExample",class:"accordion d-lg-none"},$={class:"accordion-item bg-tertiary border-0"},x={id:"headingOne",class:"accordion-header"},S={class:"accordion-button bg-transparent px-3 collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"false","aria-controls":"collapseOne"},M=v((()=>(0,r._)("span",{class:"fw-bold text-dark"},"訂單摘要",-1))),O={class:"fw-bold ms-auto"},C={id:"collapseOne",class:"accordion-collapse collapse","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},D={class:"accordion-body"},H={class:"table mb-0"},k=["src","alt"],L=v((()=>(0,r._)("td",{class:"fs-4 fw-bold pt-3 pb-0 px-0 border-top border-secondary border-bottom-0"}," 總計 ",-1))),T={colspan:"2",class:"fs-4 fw-bold pt-3 pb-0 px-0 text-end border-top border-secondary border-bottom-0"},I={class:"d-none d-lg-block bg-tertiary py-4 px-3"},W={class:"table my-2"},j=["src","alt"],z=v((()=>(0,r._)("td",{class:"fs-4 fw-bold pt-3 pb-0 px-0 border-top border-secondary border-bottom-0"}," 總計 ",-1))),U={colspan:"2",class:"fs-4 fw-bold pt-3 pb-0 px-0 text-end border-top border-secondary border-bottom-0"};function Z(e,t,a,s,d,l){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",w,[(0,r._)("div",$,[(0,r._)("h2",x,[(0,r._)("button",S,[M,(0,r._)("span",O," NT$"+(0,o.zw)(l.$filters.currency(a.parentOrderSummaryTotal)),1)])]),(0,r._)("div",C,[(0,r._)("div",D,[(0,r._)("table",H,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.parentOrderSummaryData,((e,t)=>((0,r.wg)(),(0,r.iD)("tbody",{key:e.id},[(0,r._)("tr",null,[(0,r._)("td",{class:(0,o.C_)(["pt-0 px-0 border-bottom-0",[t===a.parentOrderSummaryData.length-1?"pb-3":"pb-2"]])},[(0,r._)("img",{src:e.product.imageUrl,alt:e.product.title,class:"w-100 ojf-cover"},null,8,k)],2),(0,r._)("td",{class:(0,o.C_)(["fw-bold align-middle border-bottom-0 pt-0 ps-3",[t===a.parentOrderSummaryData.length-1?"pb-3":"pb-2"]])},(0,o.zw)(e.product.title)+" x"+(0,o.zw)(e.qty),3),(0,r._)("td",{class:(0,o.C_)(["fw-bold text-end align-middle border-bottom-0 pt-0 pe-0",[t===a.parentOrderSummaryData.length-1?"pb-3":"pb-2"]])}," NT$"+(0,o.zw)(l.$filters.currency(e.final_total)),3)])])))),128)),(0,r._)("tfoot",null,[(0,r._)("tr",null,[L,(0,r._)("td",T," NT$"+(0,o.zw)(l.$filters.currency(a.parentOrderSummaryTotal)),1)])])])])])])]),(0,r._)("div",I,[(0,r._)("table",W,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.parentOrderSummaryData,((e,t)=>((0,r.wg)(),(0,r.iD)("tbody",{key:e.id},[(0,r._)("tr",null,[(0,r._)("td",{class:(0,o.C_)(["pt-0 px-0 border-bottom-0",[t===a.parentOrderSummaryData.length-1?"pb-3":"pb-2"]])},[(0,r._)("img",{src:e.product.imageUrl,alt:e.product.title,class:"w-100 ojf-cover"},null,8,j)],2),(0,r._)("td",{class:(0,o.C_)(["fw-bold align-middle border-bottom-0 pt-0 ps-3",[t===a.parentOrderSummaryData.length-1?"pb-3":"pb-2"]])},(0,o.zw)(e.product.title)+" x"+(0,o.zw)(e.qty),3),(0,r._)("td",{class:(0,o.C_)(["fw-bold text-end align-middle border-bottom-0 pt-0 pe-0",[t===a.parentOrderSummaryData.length-1?"pb-3":"pb-2"]])}," NT$"+(0,o.zw)(l.$filters.currency(e.final_total)),3)])])))),128)),(0,r._)("tfoot",null,[(0,r._)("tr",null,[z,(0,r._)("td",U," NT$"+(0,o.zw)(l.$filters.currency(a.parentOrderSummaryTotal)),1)])])])])],64)}var N={inject:["$filters"],props:{parentOrderSummaryData:{type:Array,default(){return[]}},parentOrderSummaryTotal:{type:Number,default:0}}},E=a(89);const Y=(0,E.Z)(N,[["render",Z],["__scopeId","data-v-841fb0ae"]]);var q=Y;const F={id:"exampleModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},K={class:"modal-dialog"},V={class:"modal-content"},A={class:"modal-header bg-danger"},R={class:"modal-title text-light fw-bold"},B=(0,r._)("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),G={class:"modal-body pb-0"},J=(0,r._)("div",{class:"modal-footer border-0"},[(0,r._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 關閉 ")],-1);function P(e,t,a,o,s,d){return(0,r.wg)(),(0,r.iD)("div",F,[(0,r._)("div",K,[(0,r._)("div",V,[(0,r._)("div",A,[(0,r._)("h5",R,[(0,r.WI)(e.$slots,"title")]),B]),(0,r._)("div",G,[(0,r.WI)(e.$slots,"body")]),J])])],512)}var Q=a(1339),X={mixins:[Q.Z],data(){return{modal:{}}},mounted(){this.$refs.modal.addEventListener("hide.bs.modal",this.hideModalHandler)},beforeUnmount(){this.$refs.modal.removeEventListener("hide.bs.modal",this.hideModalHandler)},methods:{hideModalHandler(){this.$router.push("/products/list")}}};const ee=(0,E.Z)(X,[["render",P]]);var te=ee,ae=a(9862),re=a(9017),oe={components:{OrderSummary:q,HintModal:te,UserFooter:ae.Z,LoginModal:re.Z},mixins:[_.Z],inject:["$emitter","$pushMessageState"],data(){return{orderSummaryData:[],orderSummaryTotal:0,orderId:"",receiverInfo:{},receiverMessage:"",browserWidth:0,browserHeight:0,sectionHeight:0,isLoading:!0}},watch:{$route(){"info"===this.$route.name&&this.getCart(),"payment"===this.$route.name&&(this.orderId=this.$route.params.orderId,this.getOrder())},browserWidth(){const e=this.$refs.nav.offsetHeight,t=this.$refs.footerSection.sectionHeight;this.sectionHeight=this.browserHeight-e-t}},created(){"info"===this.$route.name&&this.getCart(),"payment"===this.$route.name&&(this.orderId=this.$route.params.orderId,this.getOrder())},mounted(){this.$emitter.on("updateCart",this.updateCartHandler)},beforeUnmount(){this.$emitter.off("updateCart",this.updateCartHandler)},methods:{getCart(){const e="https://vue3-course-api.hexschool.io/api/vue3-final/cart";this.$http.get(e).then((e=>{e.data.success&&(e.data.data.carts.length||this.$refs.hintModal.showModal(),this.orderSummaryData=e.data.data.carts,this.orderSummaryTotal=e.data.data.final_total,this.isLoading=!1)})).catch((e=>{this.$pushMessageState(e.response,"取得購物車")}))},getOrder(){const e=`https://vue3-course-api.hexschool.io/api/vue3-final/order/${this.orderId}`;this.$http.get(e).then((e=>{e.data.success&&(this.orderSummaryData=Object.values(e.data.order.products),this.orderSummaryTotal=e.data.order.total,this.receiverInfo={...e.data.order.user},e.data.order.message&&(this.receiverMessage=e.data.order.message)),this.isLoading=!1})).catch((e=>{this.$pushMessageState(e.response,"取得訂單")}))},updateCartHandler(){this.getCart()},showLoginModal(){this.$refs.loginModal.showModal()}}};const se=(0,E.Z)(oe,[["render",y]]);var de=se}}]);
//# sourceMappingURL=151.ad73d800.js.map