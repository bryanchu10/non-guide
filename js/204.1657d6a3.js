"use strict";(self["webpackChunknon_guide"]=self["webpackChunknon_guide"]||[]).push([[204],{709:function(e,t,a){a.d(t,{Z:function(){return w}});var s=a(3396),l=a(7139),r=a(9242);const i={"aria-label":"Page navigation",class:"mb-4"},d={class:"pagination justify-content-center"},o=["tabindex"],n=(0,s._)("span",{"aria-hidden":"true"},"«",-1),p=[n],c=["onClick"],m=["tabindex"],u=(0,s._)("span",{"aria-hidden":"true"},"»",-1),_=[u];function h(e,t,a,n,u,h){return(0,s.wg)(),(0,s.iD)("nav",i,[(0,s._)("ul",d,[(0,s._)("li",{class:(0,l.C_)(["page-item",{disabled:!a.pages.has_pre}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Previous",tabindex:a.pages.has_pre?0:-1,onClick:t[0]||(t[0]=(0,r.iM)((e=>h.updatePage(a.pages.current_page-1)),["prevent"]))},p,8,o)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.pages.total_pages,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e,class:(0,l.C_)(["page-item",{active:e===a.pages.current_page}])},[(0,s._)("a",{class:"page-link",href:"#",onClick:(0,r.iM)((t=>h.updatePage(e)),["prevent"])},(0,l.zw)(e),9,c)],2)))),128)),(0,s._)("li",{class:(0,l.C_)(["page-item",{disabled:!a.pages.has_next}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Next",tabindex:a.pages.has_next?0:-1,onClick:t[1]||(t[1]=(0,r.iM)((e=>h.updatePage(a.pages.current_page+1)),["prevent"]))},_,8,m)],2)])])}var g={props:{pages:{type:Object,default(){return{}}},tabindex:{type:Number,default:1}},emits:["emit-pages"],methods:{updatePage(e){this.$emit("emit-pages",e)}}},b=a(89);const f=(0,b.Z)(g,[["render",h]]);var w=f},2218:function(e,t,a){a.d(t,{Z:function(){return y}});var s=a(3396),l=a(7139);const r={ref:"modal",class:"modal",tabindex:"-1"},i={class:"modal-dialog"},d={class:"modal-content"},o=(0,s._)("div",{class:"modal-header bg-danger text-white"},[(0,s._)("h5",{class:"modal-title"}," 刪除項目 "),(0,s._)("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),n={class:"modal-body"},p=(0,s.Uk)("是否刪除"),c={class:"text-danger"},m=(0,s.Uk)("？（刪除後將無法恢復）"),u={class:"modal-footer"},_=(0,s._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function h(e,t,a,h,g,b){return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",i,[(0,s._)("div",d,[o,(0,s._)("div",n,[(0,s._)("p",null,[p,(0,s._)("strong",c,(0,l.zw)(g.titleStr),1),m])]),(0,s._)("div",u,[_,(0,s._)("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=t=>e.$emit("del-item",g.tempItem))}," 確認刪除 ")])])])],512)}var g=a(1339),b={mixins:[g.Z],props:{item:{type:Object,default(){return{}}}},emits:["del-item"],data(){return{tempItem:{},titleStr:"",modal:{}}},watch:{item(){this.tempItem=JSON.parse(JSON.stringify(this.item)),"ordersManage"===this.$route.name?this.titleStr=this.item.id:this.titleStr=this.item.title}}},f=a(89);const w=(0,f.Z)(b,[["render",h]]);var y=w},5204:function(e,t,a){a.r(t),a.d(t,{default:function(){return $e}});var s=a(3396),l=a(7139);const r={class:"container mt-6"},i={class:"table-responsive"},d={class:"table mt-4"},o=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{width:"30",class:"text-nowrap"}," # "),(0,s._)("th",{width:"100",class:"text-nowrap"}," 收件人 "),(0,s._)("th",{width:"240",class:"text-nowrap"}," 訂單編號 "),(0,s._)("th",{width:"",class:"text-nowrap"}," 內容 "),(0,s._)("th",{width:"120",class:"text-nowrap"}," 總金額 "),(0,s._)("th",{width:"120",class:"text-nowrap"}," 成立時間 "),(0,s._)("th",{width:"80",class:"text-nowrap"}," 狀態 "),(0,s._)("th",{width:"120",class:"text-nowrap"}," 編輯 ")])],-1),n={class:"text-nowrap"},p={class:"text-nowrap"},c={class:"text-nowrap"},m={class:"text-right"},u={class:"text-right text-nowrap"},_={class:"list-unstyled mb-0"},h={class:"text-nowrap"},g={key:0,class:"text-success"},b={key:1,class:"text-danger"},f={class:"text-nowrap"},w={class:"btn-group"},y=["onClick"],O=["onClick"];function v(e,t,a,v,x,k){const M=(0,s.up)("VueLoading"),$=(0,s.up)("OrderUpdateModal"),D=(0,s.up)("DelModal"),C=(0,s.up)("PaginationComponent");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(M,{active:x.isLoading},null,8,["active"]),(0,s._)("div",r,[(0,s._)("div",i,[(0,s._)("table",d,[o,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(x.orders,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",null,(0,l.zw)(e.num),1),(0,s._)("td",n,(0,l.zw)(e.user.name),1),(0,s._)("td",p,(0,l.zw)(e.id),1),(0,s._)("td",c,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.products,((e,t)=>((0,s.wg)(),(0,s.iD)("ul",{key:t,class:"list-unstyled mb-0"},[(0,s._)("li",null,(0,l.zw)(e.product.title)+" x"+(0,l.zw)(e.qty),1)])))),128))]),(0,s._)("td",m," NT$"+(0,l.zw)(k.$filters.currency(e.total)),1),(0,s._)("td",u,[(0,s._)("ul",_,[(0,s._)("li",null,(0,l.zw)(k.$dayjs.unix(e.create_at).tz("Asia/Taipei").format("YYYY-MM-DD")),1),(0,s._)("li",null,(0,l.zw)(k.$dayjs.unix(e.create_at).tz("Asia/Taipei").format("HH:mm:ss")),1)])]),(0,s._)("td",h,[e.is_paid?((0,s.wg)(),(0,s.iD)("span",g,"已付款")):((0,s.wg)(),(0,s.iD)("span",b,"未付款"))]),(0,s._)("td",f,[(0,s._)("div",w,[(0,s._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:t=>k.openModal(e)}," 編輯 ",8,y),(0,s._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:t=>k.openDelModal(e)}," 刪除 ",8,O)])])])))),128))])]),(0,s.Wm)($,{ref:"orderUpdateModal",order:x.tempOrder,onUpdateOrder:k.updateOrder},null,8,["order","onUpdateOrder"]),(0,s.Wm)(D,{ref:"delModal",item:x.tempOrder,onDelItem:k.delOrder},null,8,["item","onDelItem"])])]),(0,s.Wm)(C,{pages:x.pagination,onEmitPages:k.getOrders},null,8,["pages","onEmitPages"])],64)}var x=a(9242);const k={id:"exampleModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},M={class:"modal-dialog modal-xl",role:"document"},$={class:"modal-content border-0"},D={class:"modal-header bg-dark text-white fw-bold"},C={id:"exampleModalLabel",class:"modal-title"},z={class:"fw-bold"},S=(0,s._)("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),U={class:"modal-body"},N={class:"row"},Y={class:"col-lg-6"},j={class:"row gx-2"},T={class:"col-6 mb-3"},V=(0,s._)("label",{for:"create_at_date",class:"form-label"},"成立日期",-1),P={class:"col-6 mb-3"},q=(0,s._)("label",{for:"create_at_time",class:"form-label"},"成立時間",-1),H=(0,s._)("hr",null,null,-1),J={key:0,class:"col-6 mb-3"},Z=(0,s._)("label",{for:"userName",class:"form-label"},"收件人姓名",-1),A={key:1,class:"col-6 mb-3"},L=(0,s._)("label",{for:"userTel",class:"form-label"},"收件人手機號碼",-1),I={key:2,class:"col-12 mb-3"},E=(0,s._)("label",{for:"userEmail",class:"form-label"},"收件人電子郵箱位置",-1),K={key:3,class:"col-12 mb-3"},W=(0,s._)("label",{for:"userAddress",class:"form-label"},"收件地址",-1),B={key:5,class:"col-12 mb-3"},F=(0,s._)("label",{for:"userMessage",class:"form-label"},"備註",-1),G={class:"col-lg-6"},Q={class:"mb-3"},R=(0,s._)("label",{for:"total",class:"form-label"},"總金額",-1),X={class:"input-group mb-3"},ee=(0,s._)("span",{id:"basic-addon1",class:"input-group-text"},"NT$",-1),te=(0,s._)("hr",null,null,-1),ae={class:"fs-6"},se={class:"row gx-2"},le={class:"col-6"},re=["for"],ie=["id","onUpdate:modelValue"],de={class:"col-6"},oe=["for"],ne=["id","onUpdate:modelValue"],pe=(0,s._)("hr",null,null,-1),ce={class:"form-check"},me=(0,s._)("label",{class:"form-check-label",for:"is_paid"}," 是否付款（手動修改後以當前時間為付款時間） ",-1),ue={key:0},_e={class:"modal-footer"},he=(0,s._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function ge(e,t,a,r,i,d){return(0,s.wg)(),(0,s.iD)("div",k,[(0,s._)("div",M,[(0,s._)("div",$,[(0,s._)("div",D,[(0,s._)("h5",C,[(0,s._)("span",z,"編輯單號："+(0,l.zw)(i.tempOrder.id),1)]),S]),(0,s._)("div",U,[(0,s._)("div",N,[(0,s._)("div",Y,[(0,s._)("div",j,[(0,s._)("div",T,[V,(0,s.wy)((0,s._)("input",{id:"create_at_date","onUpdate:modelValue":t[0]||(t[0]=e=>i.isoCreate_at_date=e),type:"date",class:"form-control",placeholder:"修改訂單成立日期"},null,512),[[x.nr,i.isoCreate_at_date]])]),(0,s._)("div",P,[q,(0,s.wy)((0,s._)("input",{id:"create_at_time","onUpdate:modelValue":t[1]||(t[1]=e=>i.isoCreate_at_time=e),type:"time",class:"form-control",placeholder:"修改訂單成立時間"},null,512),[[x.nr,i.isoCreate_at_time]])]),H,i.tempOrder.user?((0,s.wg)(),(0,s.iD)("div",J,[Z,(0,s.wy)((0,s._)("input",{id:"userName","onUpdate:modelValue":t[2]||(t[2]=e=>i.tempOrder.user.name=e),type:"text",class:"form-control",placeholder:"修改收件人姓名"},null,512),[[x.nr,i.tempOrder.user.name]])])):(0,s.kq)("",!0),i.tempOrder.user?((0,s.wg)(),(0,s.iD)("div",A,[L,(0,s.wy)((0,s._)("input",{id:"userTel","onUpdate:modelValue":t[3]||(t[3]=e=>i.tempOrder.user.tel=e),type:"tel",class:"form-control",placeholder:"修改收件人手機號碼"},null,512),[[x.nr,i.tempOrder.user.tel,void 0,{lazy:!0}]])])):(0,s.kq)("",!0),i.tempOrder.user?((0,s.wg)(),(0,s.iD)("div",I,[E,(0,s.wy)((0,s._)("input",{id:"userEmail","onUpdate:modelValue":t[4]||(t[4]=e=>i.tempOrder.user.email=e),type:"email",class:"form-control",placeholder:"修改收件人電子郵箱位置"},null,512),[[x.nr,i.tempOrder.user.email,void 0,{lazy:!0}]])])):(0,s.kq)("",!0),i.tempOrder.user?((0,s.wg)(),(0,s.iD)("div",K,[W,(0,s.wy)((0,s._)("input",{id:"userAddress","onUpdate:modelValue":t[5]||(t[5]=e=>i.tempOrder.user.address=e),type:"text",class:"form-control",placeholder:"修改收件地址"},null,512),[[x.nr,i.tempOrder.user.address,void 0,{lazy:!0}]])])):(0,s.kq)("",!0),i.hasMessage?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("button",{key:4,class:"btn btn-outline-secondary",onClick:t[6]||(t[6]=e=>i.hasMessage=!0)}," 開啟備註欄 ")),i.hasMessage?((0,s.wg)(),(0,s.iD)("div",B,[F,(0,s.wy)((0,s._)("textarea",{id:"userMessage","onUpdate:modelValue":t[7]||(t[7]=e=>i.tempOrder.message=e),class:"form-control",placeholder:"修改備註"},null,512),[[x.nr,i.tempOrder.message,void 0,{lazy:!0}]])])):(0,s.kq)("",!0)])]),(0,s._)("div",G,[(0,s._)("div",Q,[R,(0,s._)("div",X,[ee,(0,s.wy)((0,s._)("input",{id:"total","onUpdate:modelValue":t[8]||(t[8]=e=>i.tempOrder.total=e),type:"text",class:"form-control",placeholder:"請輸入金額"},null,512),[[x.nr,i.tempOrder.total]])])]),te,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.tempOrder.products,((e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t},[(0,s._)("h3",ae,(0,l.zw)(e.product.title),1),(0,s._)("div",se,[(0,s._)("div",le,[(0,s._)("label",{for:`${t}title`,class:"form-label"}," 標題 ",8,re),(0,s.wy)((0,s._)("input",{id:`${t}title`,"onUpdate:modelValue":e=>i.tempOrder.products[t].product.title=e,type:"text",class:"form-control",placeholder:"請輸入標題"},null,8,ie),[[x.nr,i.tempOrder.products[t].product.title]])]),(0,s._)("div",de,[(0,s._)("label",{for:`${t}qty`,class:"form-label"}," 數量 ",8,oe),(0,s.wy)((0,s._)("input",{id:`${t}qty`,"onUpdate:modelValue":e=>i.tempOrder.products[t].qty=e,type:"number",class:"form-control",placeholder:"請輸入數量"},null,8,ne),[[x.nr,i.tempOrder.products[t].qty]])])]),pe],64)))),128)),(0,s._)("div",null,[(0,s._)("div",ce,[(0,s.wy)((0,s._)("input",{id:"is_paid","onUpdate:modelValue":t[9]||(t[9]=e=>i.tempOrder.is_paid=e),class:"form-check-input",type:"checkbox","true-value":!0,"false-value":!1,onChange:t[10]||(t[10]=e=>d.addPaid_date(i.tempOrder.is_paid))},null,544),[[x.e8,i.tempOrder.is_paid]]),me])]),i.tempOrder.is_paid?((0,s.wg)(),(0,s.iD)("span",ue," 付款時間："+(0,l.zw)(d.$dayjs.unix(i.tempOrder.paid_date).tz("Asia/Taipei").format("YYYY-MM-DD HH:mm:ss")),1)):(0,s.kq)("",!0)])])]),(0,s._)("div",_e,[he,(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:t[11]||(t[11]=t=>e.$emit("update-order",i.tempOrder))}," 確認 ")])])])],512)}var be=a(1339),fe={mixins:[be.Z],inject:["$filters","$dayjs"],props:{order:{type:Object,default(){return{}}}},emits:["update-order"],data(){return{tempOrder:{},isLoading:!1,isoCreate_at_date:"",isoCreate_at_time:"",isoPaid_date:"",hasMessage:!1,modal:{}}},computed:{timeToBackend(){const e=`${this.isoCreate_at_date}T${this.isoCreate_at_time}+08:00`,t=this.$dayjs(e).unix();return t}},watch:{order(){this.tempOrder=JSON.parse(JSON.stringify(this.order)),this.isoCreate_at_date=this.$dayjs.unix(this.tempOrder.create_at).tz("Asia/Taipei").format("YYYY-MM-DD"),this.isoCreate_at_time=this.$dayjs.unix(this.tempOrder.create_at).tz("Asia/Taipei").format("HH:mm:ss"),this.tempOrder.message?this.hasMessage=!0:this.hasMessage=!1},timeToBackend(){this.tempOrder.create_at=this.timeToBackend}},methods:{addPaid_date(e){e&&(this.tempOrder.paid_date=Math.floor((new Date).getTime()/1e3))}}},we=a(89);const ye=(0,we.Z)(fe,[["render",ge]]);var Oe=ye,ve=a(2218),xe=a(709),ke={components:{OrderUpdateModal:Oe,DelModal:ve.Z,PaginationComponent:xe.Z},inject:["$emitter","$filters","$pushMessageState","$dayjs"],data(){return{orders:[],pagination:{},tempOrder:{},isLoading:!1}},created(){this.getOrders()},methods:{getOrders(e=1){const t=`https://vue3-course-api.hexschool.io/api/vue3-final/admin/orders?page=${e}`;this.$http.get(t).then((e=>{this.orders=e.data.orders,this.pagination=e.data.pagination,this.isLoading=!1})).catch((e=>{this.$pushMessageState(e.response,"取得訂單列表")}))},openModal(e){this.tempOrder=JSON.parse(JSON.stringify(e)),this.$refs.orderUpdateModal.showModal()},updateOrder(e){this.tempOrder=JSON.parse(JSON.stringify(e));const t=`https://vue3-course-api.hexschool.io/api/vue3-final/admin/order/${e.id}`;this.$http.put(t,{data:this.tempOrder}).then((e=>{this.$refs.orderUpdateModal.hideModal(),this.getOrders(),this.pushMessageState(e,"訂單更新")})).catch((e=>{this.$pushMessageState(e.response,"更新單一訂單")}))},openDelModal(e){this.tempOrder=JSON.parse(JSON.stringify(e)),this.$refs.delModal.showModal()},delOrder(e){this.tempOrder=JSON.parse(JSON.stringify(e));const t=`https://vue3-course-api.hexschool.io/api/vue3-final/admin/order/${e.id}`;this.$http.delete(t,{data:this.tempOrder}).then((e=>{this.$refs.delModal.hideModal(),this.getOrders(),this.pushMessageState(e,"刪除")})).catch((e=>{this.$pushMessageState(e.response,"刪除單一訂單")}))}}};const Me=(0,we.Z)(ke,[["render",v]]);var $e=Me}}]);
//# sourceMappingURL=204.1657d6a3.js.map